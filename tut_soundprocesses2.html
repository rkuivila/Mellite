<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>SP2 - Understanding Objects · Mellite</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content='Mellite'/>
<link href="https://fonts.googleapis.com/css?family=Roboto:100normal,100italic,300normal,300italic,400normal,400italic,500normal,500italic,700normal,700italic,900normal,900italicc" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="js/page.js"></script>
<script type="text/javascript" src="js/groups.js"></script>
<link rel="stylesheet" type="text/css" href="lib/normalize.css/normalize.css"/>
<link rel="stylesheet" type="text/css" href="lib/foundation/dist/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="css/page.css"/>

<!--
<link rel="shortcut icon" href="images/favicon.ico" />
-->
</head>

<body>
<div class="off-canvas-wrapper">
<div class="off-canvas-wrapper-inner" data-off-canvas-wrapper>

<div class="off-canvas position-left" id="off-canvas-menu" data-off-canvas>
<nav class="off-canvas-nav">
<div class="nav-home">
<a href="index.html" >
<span class="home-icon">⌂</span>Mellite
</a>
<div class="version-number">
2.17.0
</div>
</div>
<div class="nav-toc">
<ul>
  <li><a href="tutorials.html" class="page">Tutorials</a>
  <ul>
    <li><a href="tut_mellite_videos.html" class="page">Mellite Video Tutorials</a></li>
    <li><a href="tut_soundprocesses1.html" class="page">SP1 - Intro to SoundProcesses</a></li>
    <li><a href="tut_soundprocesses2.html" class="active page">SP2 - Understanding Objects</a></li>
  </ul></li>
  <li><a href="links.html" class="page">Links</a></li>
</ul>
</div>

</nav>
</div>

<div class="off-canvas-content" data-off-canvas-content>

<header class="site-header expanded row">
<div class="small-12 column">
<a href="#" class="off-canvas-toggle hide-for-medium" data-toggle="off-canvas-menu"><svg class="svg-icon svg-icon-menu" version="1.1" id="Menu" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"> <path class="svg-icon-menu-path" fill="#53CDEC" d="M16.4,9H3.6C3.048,9,3,9.447,3,10c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,9.447,16.952,9,16.4,9z M16.4,13
H3.6C3.048,13,3,13.447,3,14c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,13.447,16.952,13,16.4,13z M3.6,7H16.4
C16.952,7,17,6.553,17,6c0-0.553-0.048-1-0.6-1H3.6C3.048,5,3,5.447,3,6C3,6.553,3.048,7,3.6,7z"/></svg>
</a>
<div class="title"><a href="index.html">Mellite</a></div>

<!--
<a href="https://www.example.com" class="logo show-for-medium">logo</a>
-->
</div>
</header>

<div class="expanded row">

<div class="medium-3 large-2 show-for-medium column">
<nav class="site-nav">
<div class="nav-home">
<a href="index.html" >
<span class="home-icon">⌂</span>Mellite
</a>
<div class="version-number">
2.17.0
</div>
</div>
<div class="nav-toc">
<ul>
  <li><a href="tutorials.html" class="page">Tutorials</a>
  <ul>
    <li><a href="tut_mellite_videos.html" class="page">Mellite Video Tutorials</a></li>
    <li><a href="tut_soundprocesses1.html" class="page">SP1 - Intro to SoundProcesses</a></li>
    <li><a href="tut_soundprocesses2.html" class="active page">SP2 - Understanding Objects</a></li>
  </ul></li>
  <li><a href="links.html" class="page">Links</a></li>
</ul>
</div>

</nav>
</div>

<div class="small-12 medium-9 large-10 column">
<section class="site-content">

<div class="page-header row">
<div class="medium-12 show-for-medium column">
<div class="nav-breadcrumbs">
<ul>
  <li><a href="index.html">Mellite</a></li>
  <li><a href="tutorials.html">Tutorials</a></li>
  <li>SP2 - Understanding Objects</li>
</ul>
</div>
</div>
</div>

<div class="page-content row">
<div class="small-12 large-9 column" id="docs">
<h1><a href="#sp2-understanding-objects" name="sp2-understanding-objects" class="anchor"><span class="anchor-link"></span></a>SP2 - Understanding Objects</h1>
<p>The introductory tutorial stopped short of going into the <em>customary</em> way SoundProcesses is used, and instead showed the transactional variant of ScalaCollider to play a synth. Most of the time, instead of creating instances of <code>Synth</code> yourself, you will instead manipulate other objects that automatically spawn synths when the server is running and some other conditions are met. In this second tutorial I will introduce this approach to creating sounding objects.</p>
<h2><a href="#the-core-object-proc" name="the-core-object-proc" class="anchor"><span class="anchor-link"></span></a>The Core Object: <code>Proc</code></h2>
<p>The SoundProcesses way of referring to a synth is an object of type <a href="latest/api/de/sciss/synth/proc/Proc.html"><code>Proc</code></a>. The function of <code>Proc</code> is threefold:</p>
<ul>
  <li>it&rsquo;s method <code>graph</code> points to the <code>SynthGraph</code>, a variable that can be updated</li>
  <li>it&rsquo;s method <code>outputs</code> points to an interface for creating outlets that can be patched into other objects</li>
  <li>it implements the <a href="latest/api/de/sciss/lucre/stm/Obj.html"><code>Obj</code></a> trait or &ldquo;protocol&rdquo;, a uniform  way all sorts of objects are modelled in SoundProcesses</li>
</ul>
<p>Before I explain what this means, let us look at another example snippet that shows the usage of <code>Proc</code>:</p>
<pre class="prettyprint"><code class="language-scala">import de.sciss.lucre.stm
import de.sciss.lucre.synth.InMemory
import de.sciss.synth._
import de.sciss.synth.proc.{AuralSystem, Proc, Transport, WorkspaceHandle}
import de.sciss.synth.ugen._

object Snippet2 extends App {
  type S = InMemory
  implicit val cursor: stm.Cursor[S] = InMemory()
  import WorkspaceHandle.Implicits._

  val aural = AuralSystem()

  val bubbles = SynthGraph {
    val o   = LFSaw.kr(Seq(8.0, 7.23)).madd(3, 80)
    val f   = LFSaw.kr(0.4).madd(24, o)
    val s   = SinOsc.ar(f.midicps) * 0.04
    val c   = CombN.ar(s, 0.2, 0.2, 4)
    Out.ar(0, c)
  }

  cursor.step { implicit tx =&gt;
    val p = Proc[S]
    p.graph() = bubbles

    val t = Transport[S](aural)
    t.addObject(p)
    t.play()

    aural.start()
  }

  Thread.sleep(10000)
  sys.exit()
}</code></pre>
<p>If you run this snippet, you should see SuperCollider booting, then hear the familiar &lsquo;analog bubbles&rsquo; sound again. Also a significant portion of the code is identical to the first version we&rsquo;ve seen in the previous tutorial. The main difference here is that instead of waiting for aural system to have booted and then create a <code>Synth</code> instance, an instance of <code>Proc</code> is created and added to a <code>Transport</code>. I will discuss the changes step by step, beginning with the initialisation:</p>
<pre class="prettyprint"><code class="language-scala">type S = InMemory
implicit val cursor: stm.Cursor[S] = InMemory()
import WorkspaceHandle.Implicits._</code></pre>
<p>The first line contains a so-called <em>type-alias</em>. In Scala, a type-alias does not create a new type, but simply introduces a new name for an existing type. In SoundProcesses, many objects require as type parameter the type of system&mdash;in-memory, durable, confluent&mdash;and we can avoid having to insert the particular system type we choose, here <code>InMemory</code>, in many places. So in the following lines, whenever you see <code>[S]</code>, this is just aliased to <code>[InMemory]</code>. However, should we eventually decide to change the system type, for example to <code>Durable</code>, the only change that needs to be made to the program is to rewrite the type-alias as <code>type S = Durable</code>.</p>
<p>The next line adds an <code>implicit</code> modifier to the cursor, and we also annotate the value type explicitly with <code>stm.Cursor[S]</code> (note that <code>stm</code> was imported in the very beginning through <code>import de.sciss.lucre.stm</code>). The reason for marking this value implicit is that when the <code>Transport</code> object is created further down, it requires an implicit parameter of type <code>Cursor[S]</code>, and we therefore make it visible here. The type annotation <code>: stm.Cursor[S]</code> is not necessary, strictly speaking, because Scala will otherwise infer the type automatically. But it is good practice to always specify the types of implicit values, because it avoids surprises and ambiguities in the compiler&rsquo;s search for implicit values. We could also have choosen to use the more precise type <code>: InMemory</code> here, but we never need to refer to this value as this particular system, so the more general type is sufficient and therefore better indicates the use case.</p>
<p>The third line imports an implicit method that provides a <a href="latest/api/de/sciss/synth/proc/WorkspaceHandle.html"><code>WorkspaceHandle</code></a>. This is a &ldquo;dummy&rdquo; workspace that we can use in the absence of a real workspace which we have not dealt with yet. A workspace handle allows objects to register callbacks for when the workspace closes. For example, the transport registers itself with a workspace in order to ensure that it stops and frees resources if the corresponding workspace closes. Other than that, it is not of any importance here.</p>
<h3><a href="#instantiating-and-configuring-proc" name="instantiating-and-configuring-proc" class="anchor"><span class="anchor-link"></span></a>Instantiating and Configuring <code>Proc</code></h3>
<p>Next, let&rsquo;s see the creation of the <code>Proc</code> instance:</p>
<pre class="prettyprint"><code class="language-scala">val p = Proc[S]
p.graph() = bubbles</code></pre><div class="callout warning "><div class="callout-title">Warning</div>
<p><strong>TODO:</strong> The tutorial is in the making and will continue here</p></div>
<div class="source-github">
The source code for this page can be found <a href="https://github.com/Sciss/Mellite-website/tree/master/src/paradox/tut_soundprocesses2.md">here</a>.
</div>

<div class="nav-next">
<p><strong>Next:</strong> <a href="links.html">Links</a></p>
</div>
</div>
<div class="large-3 show-for-large column" data-sticky-container>
<nav class="sidebar sticky" data-sticky data-anchor="docs" data-sticky-on="large">
<div class="page-nav">
<div class="nav-title">On this page:</div>
<div class="nav-toc">
<ul>
  <li><a href="tut_soundprocesses2.html#sp2-understanding-objects" class="header">SP2 - Understanding Objects</a>
  <ul>
    <li><a href="tut_soundprocesses2.html#the-core-object-proc" class="header">The Core Object: <code>Proc</code></a></li>
  </ul></li>
</ul>
</div>
</div>
</nav>
</div>
</div>

</section>
</div>

</div>

<footer class="site-footer">

<section class="site-footer-nav">
<div class="expanded row">
<div class="small-12 large-offset-2 large-10 column">
<div class="row site-footer-content">

<div class="small-12 medium-4 large-3 text-center column">
<div class="nav-links">
<ul>
<!-- <li><a href="https://www.example.com/products/">Products</a> -->
</ul>
</div>
</div>

</div>
</div>
</div>
</section>

<section class="site-footer-base">
<div class="expanded row">
<div class="small-12 large-offset-2 large-10 column">
<div class="row site-footer-content">

<div class="small-12 text-center large-9 column">

<!--
<div class="copyright">
<span class="text">&copy; 2017</span>
<a href="https://www.example.com" class="logo">logo</a>
</div>
-->
</div>

</div>
</div>
</div>
</section>
</footer>

</div>
</div>
</div>
</body>

<script type="text/javascript" src="lib/foundation/dist/foundation.min.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="js/magellan.js"></script>

<style type="text/css">@import "lib/prettify/prettify.css";</style>
<script type="text/javascript" src="lib/prettify/prettify.js"></script>
<script type="text/javascript" src="lib/prettify/lang-scala.js"></script>
<script type="text/javascript">jQuery(function(){window.prettyPrint && prettyPrint()});</script>

</html>
